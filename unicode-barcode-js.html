<html>

<script>

var map = {
    '*': '1 1001',
    'A': '011 10',
    'B': '101 10',
    'C': '001 11',
    'D': '110 10',
    'E': '010 11',
    'F': '100 11',
    'G': '111 00',
    'H': '011 01',
    'I': '101 01',
    'J': '110 01',
    'K': '0111 0',
    'L': '1011 0',
    'M': '0011 1',
    'N': '1101 0',
    'O': '0101 1',
    'P': '1001 1',
    'Q': '1110 0',
    'R': '0110 1',
    'S': '1010 1',
    'T': '1100 1',
    'U': '0 1110',
    'V': '1 0110',
    'W': '0 0111',
    'X': '1 1010',
    'Y': '0 1011',
    'Z': '1 0011',
    '.': '0 1101',
    '-': '1 1100',
    ' ': '1 0101',
    '0': '11 001',
    '1': '01 110',
    '2': '10 110',
    '3': '00 111',
    '4': '11 010',
    '5': '01 011',
    '6': '10 011',
    '7': '11 100',
    '8': '01 101',
    '9': '10 101',
};

var symbols = {
    '0': '█',
    '1': '│',
    ' ': '&nbsp;&nbsp;',
};

function code39(s)
{


    var r = '';

    var last = '';
    for(var i = 0; i < s.length; i++)
    {
        var bits = map[s[i]];
        if (bits == undefined)
        {
            // throw s[i] + ': unknown symbol?';
            continue;
        }

        for(var j = 0; j < bits.length; j++)
        {
            if (bits[j] == '0' && last == '0')
            {
                r += '  ';
            }
            r += symbols[bits[j]];
            last = bits[j];
        }
    }

    return r;
}

function update()
{
    var input = document.getElementById('input').value;

    // Upper case the input
    input = input.toUpperCase();

    // Remove all characters that are not in the map
    var regex = new RegExp('[^' + Object.keys(map).join('|') + ']', 'g');

    var output = document.getElementById('output');
    output.innerHTML = code39('*' + input + '*');
}

// On document load
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('input').addEventListener('input', update);
    update();
});

</script>

<style>
    * {
        box-sizing: border-box;
    }

    body {
        background-color: black;
        color: white;
        font-size: 1rem;
    }
    .flex-center {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .output {
        font-size: 1rem;
        padding: 1rem;
    }
</style>

<body class="flex-center">

    <h1>Unicode Barcode Generator</h1>

    <section>
        <h2>Character list</h2>
        <p>
            <code>"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.- "</code>
        </p>
    </section>

    <section>
        <h2>Input</h2>
        <input id="input" type="text" value="CODE39"/>
    </section>

    <section>
        <h2>Output</h2>
        <p id="output" class="output"></p>
    </section>

    <section>
        <h2>Control (CODE39)</h2>
        <p class="output">
            │&nbsp;&nbsp;│█&nbsp;█│█&nbsp;█│&nbsp;&nbsp;││█│█│&nbsp;&nbsp;│││█&nbsp;&nbsp;│█&nbsp;█│█&nbsp;&nbsp;││█&nbsp;█&nbsp;&nbsp;││││█&nbsp;&nbsp;│█││&nbsp;&nbsp;│█&nbsp;█│
        </p>
    </section>

</body>



</html>